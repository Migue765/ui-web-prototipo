<div class="settings-layout">
    <app-sidebar (navigationChange)="onNavigationChange($event)"></app-sidebar>

    <div class="settings-page">
        <!-- Header fijo -->
        <div class="page-header-fixed">
            <div class="page-header-content">
                <h1 class="page-title">Configuraciones</h1>
                <button class="help-button">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path
                            d="M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM9 12H7V10H9V12ZM9 8H7V4H9V8Z"
                            fill="#4B5563" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Contenido principal -->
        <div class="settings-content">
            <!-- Sidebar de navegación secundaria -->
            <div class="settings-sidebar">
                <nav class="settings-nav">
                    <div class="nav-item active" (click)="setActiveSection('general')">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M8 1L10.5 6H15.5L11.75 9.5L13.25 14.5L8 11L2.75 14.5L4.25 9.5L0.5 6H5.5L8 1Z"
                                fill="#F66B0E" />
                        </svg>
                        <span class="nav-text">General</span>
                    </div>
                    <div class="nav-item" (click)="setActiveSection('notifications')">
                        <svg width="14" height="16" viewBox="0 0 14 16" fill="none">
                            <path
                                d="M7 0C3.13 0 0 3.13 0 7V11L2 13H12L14 11V7C14 3.13 10.87 0 7 0ZM7 16C8.1 16 9 15.1 9 14H5C5 15.1 5.9 16 7 16Z"
                                fill="#4B5563" />
                        </svg>
                        <span class="nav-text">Notificaciones</span>
                    </div>
                    <div class="nav-item" (click)="setActiveSection('appearance')">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path
                                d="M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM8 14C4.69 14 2 11.31 2 8C2 4.69 4.69 2 8 2V14Z"
                                fill="#4B5563" />
                        </svg>
                        <span class="nav-text">Apariencia</span>
                    </div>
                    <div class="nav-item" (click)="setActiveSection('account')">
                        <svg width="14" height="16" viewBox="0 0 14 16" fill="none">
                            <path
                                d="M7 8C9.21 8 11 6.21 11 4C11 1.79 9.21 0 7 0C4.79 0 3 1.79 3 4C3 6.21 4.79 8 7 8ZM7 10C4.67 10 0 11.17 0 13.5V16H14V13.5C14 11.17 9.33 10 7 10Z"
                                fill="#4B5563" />
                        </svg>
                        <span class="nav-text">Cuenta</span>
                    </div>
                </nav>
            </div>

            <!-- Contenido de configuraciones -->
            <div class="settings-main">
                <!-- Sección General -->
                <div class="settings-section" *ngIf="activeSection === 'general'">
                    <!-- Configuración de Pomodoro -->
                    <div class="config-card">
                        <div class="card-header">
                            <div class="icon-container pomodoro-icon">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path
                                        d="M8 1L10.5 6H15.5L11.75 9.5L13.25 14.5L8 11L2.75 14.5L4.25 9.5L0.5 6H5.5L8 1Z"
                                        fill="#F66B0E" />
                                </svg>
                            </div>
                            <div class="header-text">
                                <h3 class="card-title">Configuración de Pomodoro</h3>
                                <p class="card-subtitle">Ajusta los tiempos de trabajo y descanso</p>
                            </div>
                        </div>

                        <div class="config-controls">
                            <!-- Tiempo de enfoque -->
                            <div class="control-group">
                                <div class="control-header">
                                    <label class="control-label">Tiempo de enfoque</label>
                                    <span class="control-value">{{ focusTime }} min</span>
                                </div>
                                <div class="slider-container">
                                    <input type="range" class="slider" [(ngModel)]="focusTime" min="15" max="60"
                                        step="5">
                                </div>
                                <div class="slider-labels">
                                    <span class="min-label">15 min</span>
                                    <span class="max-label">60 min</span>
                                </div>
                            </div>

                            <!-- Descanso corto -->
                            <div class="control-group">
                                <div class="control-header">
                                    <label class="control-label">Descanso corto</label>
                                    <span class="control-value">{{ shortBreak }} min</span>
                                </div>
                                <div class="slider-container">
                                    <input type="range" class="slider" [(ngModel)]="shortBreak" min="3" max="15"
                                        step="1">
                                </div>
                                <div class="slider-labels">
                                    <span class="min-label">3 min</span>
                                    <span class="max-label">15 min</span>
                                </div>
                            </div>

                            <!-- Descanso largo -->
                            <div class="control-group">
                                <div class="control-header">
                                    <label class="control-label">Descanso largo</label>
                                    <span class="control-value">{{ longBreak }} min</span>
                                </div>
                                <div class="slider-container">
                                    <input type="range" class="slider" [(ngModel)]="longBreak" min="10" max="30"
                                        step="5">
                                </div>
                                <div class="slider-labels">
                                    <span class="min-label">10 min</span>
                                    <span class="max-label">30 min</span>
                                </div>
                            </div>

                            <!-- Modo estricto -->
                            <div class="toggle-control">
                                <div class="toggle-info">
                                    <span class="toggle-label">Modo estricto</span>
                                    <span class="toggle-description">Bloquea aplicaciones durante el enfoque</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" [(ngModel)]="strictMode">
                                    <span class="slider-toggle"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Notificaciones -->
                    <div class="config-card">
                        <div class="card-header">
                            <div class="icon-container notifications-icon">
                                <svg width="14" height="16" viewBox="0 0 14 16" fill="none">
                                    <path
                                        d="M7 0C3.13 0 0 3.13 0 7V11L2 13H12L14 11V7C14 3.13 10.87 0 7 0ZM7 16C8.1 16 9 15.1 9 14H5C5 15.1 5.9 16 7 16Z"
                                        fill="#205375" />
                                </svg>
                            </div>
                            <div class="header-text">
                                <h3 class="card-title">Notificaciones</h3>
                                <p class="card-subtitle">Configura cómo recibir alertas</p>
                            </div>
                        </div>

                        <div class="config-controls">
                            <!-- Notificaciones push -->
                            <div class="toggle-control">
                                <div class="toggle-info">
                                    <span class="toggle-label">Notificaciones push</span>
                                    <span class="toggle-description">Recibe alertas en tu dispositivo</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" [(ngModel)]="pushNotifications">
                                    <span class="slider-toggle"></span>
                                </label>
                            </div>

                            <!-- Sonidos -->
                            <div class="toggle-control">
                                <div class="toggle-info">
                                    <span class="toggle-label">Sonidos</span>
                                    <span class="toggle-description">Reproducir sonido de alerta</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" [(ngModel)]="soundAlerts">
                                    <span class="slider-toggle"></span>
                                </label>
                            </div>

                            <!-- Vibración -->
                            <div class="toggle-control">
                                <div class="toggle-info">
                                    <span class="toggle-label">Vibración</span>
                                    <span class="toggle-description">Vibrar dispositivo al finalizar</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" [(ngModel)]="vibration">
                                    <span class="slider-toggle disabled"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Apariencia -->
                    <div class="config-card">
                        <div class="card-header">
                            <div class="icon-container appearance-icon">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path
                                        d="M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM8 14C4.69 14 2 11.31 2 8C2 4.69 4.69 2 8 2V14Z"
                                        fill="#112B3C" />
                                </svg>
                            </div>
                            <div class="header-text">
                                <h3 class="card-title">Apariencia</h3>
                                <p class="card-subtitle">Personaliza la interfaz</p>
                            </div>
                        </div>

                        <div class="config-controls">
                            <div class="theme-selection">
                                <span class="control-label">Tema</span>
                                <div class="theme-options">
                                    <label class="theme-option" [class.selected]="selectedTheme === 'light'">
                                        <input type="radio" name="theme" value="light" [(ngModel)]="selectedTheme">
                                        <div class="theme-preview light-theme">
                                            <div class="theme-icon">
                                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
                                                    <path
                                                        d="M7 0L8.5 4.5H13L9.5 7.5L11 12L7 9L3 12L4.5 7.5L1 4.5H5.5L7 0Z"
                                                        fill="#EAB308" />
                                                </svg>
                                            </div>
                                            <span class="theme-name">Claro</span>
                                        </div>
                                    </label>
                                    <label class="theme-option" [class.selected]="selectedTheme === 'dark'">
                                        <input type="radio" name="theme" value="dark" [(ngModel)]="selectedTheme">
                                        <div class="theme-preview dark-theme">
                                            <div class="theme-icon">
                                                <svg width="10.5" height="14" viewBox="0 0 10.5 14" fill="none">
                                                    <path
                                                        d="M5.25 0C2.35 0 0 2.35 0 5.25C0 8.15 2.35 10.5 5.25 10.5C8.15 10.5 10.5 8.15 10.5 5.25C10.5 2.35 8.15 0 5.25 0Z"
                                                        fill="#60A5FA" />
                                                </svg>
                                            </div>
                                            <span class="theme-name">Oscuro</span>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cuenta -->
                    <div class="config-card account-section">
                        <div class="card-header">
                            <div class="icon-container account-icon">
                                <svg width="25" height="20" viewBox="0 0 25 20" fill="none">
                                    <path
                                        d="M12.5 10C15.26 10 17.5 7.76 17.5 5C17.5 2.24 15.26 0 12.5 0C9.74 0 7.5 2.24 7.5 5C7.5 7.76 9.74 10 12.5 10ZM12.5 12.5C8.33 12.5 0 14.67 0 18.75V20H25V18.75C25 14.67 16.67 12.5 12.5 12.5Z"
                                        fill="#000000" />
                                </svg>
                            </div>
                            <div class="header-text">
                                <h3 class="card-title">Cuenta</h3>
                                <p class="card-subtitle">Ajusta y administra tus cuentas</p>
                            </div>
                        </div>

                        <div class="account-actions">
                            <button class="account-action-btn" (click)="changePassword()">
                                <div class="action-content">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path
                                            d="M12 5H11V3C11 1.34 9.66 0 8 0C6.34 0 5 1.34 5 3V5H4C2.9 5 2 5.9 2 7V13C2 14.1 2.9 15 4 15H12C13.1 15 14 14.1 14 13V7C14 5.9 13.1 5 12 5ZM8 11C7.45 11 7 10.55 7 10C7 9.45 7.45 9 8 9C8.55 9 9 9.45 9 10C9 10.55 8.55 11 8 11ZM9.1 5H6.9V3C6.9 2.29 7.29 1.9 8 1.9C8.71 1.9 9.1 2.29 9.1 3V5Z"
                                            fill="#525252" />
                                    </svg>
                                    <div class="action-text">
                                        <span class="action-title">Cambiar contraseña</span>
                                        <span class="action-description">Actualiza tu contraseña de acceso</span>
                                    </div>
                                </div>
                                <svg width="10" height="16" viewBox="0 0 10 16" fill="none">
                                    <path d="M2 0L0.59 1.41L7.17 8L0.59 14.59L2 16L10 8L2 0Z" fill="#A3A3A3" />
                                </svg>
                            </button>

                            <button class="account-action-btn" (click)="logout()">
                                <div class="action-content">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path
                                            d="M6 2H2V14H6V16H2C0.9 16 0 15.1 0 14V2C0 0.9 0.9 0 2 0H6V2ZM11.09 7L8.59 4.5L10 3.09L15.09 8.18L10 13.27L8.59 11.86L11.09 9.36H4V7H11.09Z"
                                            fill="#525252" />
                                    </svg>
                                    <div class="action-text">
                                        <span class="action-title">Cerrar sesión</span>
                                        <span class="action-description">Salir de tu cuenta actual</span>
                                    </div>
                                </div>
                                <svg width="10" height="16" viewBox="0 0 10 16" fill="none">
                                    <path d="M2 0L0.59 1.41L7.17 8L0.59 14.59L2 16L10 8L2 0Z" fill="#A3A3A3" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Botones de acción -->
        <div class="action-buttons">
            <button class="save-btn" (click)="saveSettings()">
                <svg width="14" height="16" viewBox="0 0 14 16" fill="none">
                    <path
                        d="M10 0H1C0.45 0 0 0.45 0 1V15C0 15.55 0.45 16 1 16H13C13.55 16 14 15.55 14 15V4L10 0ZM7 14C5.9 14 5 13.1 5 12C5 10.9 5.9 10 7 10C8.1 10 9 10.9 9 12C9 13.1 8.1 14 7 14ZM9 6H1V1H9V6Z"
                        fill="#FFFFFF" />
                </svg>
                <span>Guardar cambios</span>
            </button>

            <button class="reset-btn" (click)="resetSettings()">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path
                        d="M8 3V1L4 5L8 9V7C10.21 7 12 8.79 12 11C12 13.21 10.21 15 8 15C5.79 15 4 13.21 4 11H2C2 14.31 4.69 17 8 17C11.31 17 14 14.31 14 11C14 7.69 11.31 5 8 5Z"
                        fill="#374151" />
                </svg>
                <span>Restablecer</span>
            </button>
        </div>
    </div>
</div>